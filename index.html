<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Baby Keyboard Smash Game!</title>
  <meta name="description" content="A keyboard smash videogame for babies. Animations such as fireworks will appear when keys are pressed.">
  <meta name="author" content="Kevin Wheeler">
  
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <!-- Background and Game Canvases -->
  <canvas id='kmw-background-canvas' style="z-index: 0;"></canvas>
  <canvas id='s' style="z-index: 1;"></canvas>
  <canvas id="canvas" style="z-index: 2;"></canvas>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // ==============================
    // Add Stylized Text to Background Canvas
    // ==============================
    let backgroundCanvas = document.getElementById('kmw-background-canvas');
    let backgroundCtx = backgroundCanvas.getContext('2d');

    function resizeBackgroundCanvas() {
      backgroundCanvas.width = window.innerWidth;
      backgroundCanvas.height = window.innerHeight;
      addStylizedText(); // Redraw the text when the canvas is resized
    }

    function addStylizedText() {
      // Set the font properties
      backgroundCtx.clearRect(0, 0, backgroundCanvas.width, backgroundCanvas.height);
      backgroundCtx.font = "bold 80px Arial"; // You can change "Arial" to any other font you like
      backgroundCtx.fillStyle = "rgba(255, 255, 255, 0.8)"; // White with some transparency

      // Add shadow for a more stylized look
      backgroundCtx.shadowColor = "black";
      backgroundCtx.shadowOffsetX = 5;
      backgroundCtx.shadowOffsetY = 5;
      backgroundCtx.shadowBlur = 10;

      // Draw the text in the middle of the canvas
      let text = "Jaxon";
      let textWidth = backgroundCtx.measureText(text).width;
      let x = (backgroundCanvas.width - textWidth) / 2;
      let y = backgroundCanvas.height / 2;

      backgroundCtx.fillText(text, x, y);
    }

    // Initial canvas setup
    resizeBackgroundCanvas();
    window.addEventListener('resize', resizeBackgroundCanvas);

    // ==============================
    // Garden Animation Setup
    // ==============================
    let gardenCanvas = document.getElementById('s');
    let gardenCtx = gardenCanvas.getContext('2d');
    gardenCanvas.width = window.innerWidth;
    gardenCanvas.height = window.innerHeight;

    Garden = function() {
      return this;
    };

    Garden.prototype = {
      grass: null,
      ambient: 1,
      initialize: function(width, height, size) {
        this.width = width;
        this.height = height;
        this.grass = [];
        for (var i = 0; i < size; i++) {
          var g = new Grass();
          g.initialize(width, height, 50, height * 1 / 3, 20, 40);
          this.grass.push(g);
        }
      },
      paint: function(ctx, time) {
        ctx.clearRect(0, 0, gardenCanvas.width, gardenCanvas.height);
        for (var i = 0; i < this.grass.length; i++) {
          this.grass[i].paint(ctx, time, this.ambient);
        }
      }
    };

    let garden = new Garden();
    garden.initialize(gardenCanvas.width, gardenCanvas.height, 300);

    let time = new Date().getTime();

    function animateGarden() {
      let ntime = new Date().getTime();
      let elapsed = ntime - time;
      garden.paint(gardenCtx, elapsed);
      requestAnimationFrame(animateGarden);
    }
    animateGarden(); // Start the garden animation loop

    // ==============================
    // Fireworks Animation and Events
    // ==============================
    let mainCanvas = document.getElementById('canvas');
    let ctx2 = mainCanvas.getContext('2d');
    mainCanvas.width = window.innerWidth;
    mainCanvas.height = window.innerHeight;

    let particles = [];

    function Particle(x, y) {
      this.x = x;
      this.y = y;
      this.angle = Math.random() * Math.PI * 2;
      this.speed = Math.random() * 5 + 2;
      this.alpha = 1;
      this.decay = Math.random() * 0.01 + 0.005;
    }

    Particle.prototype.update = function() {
      this.x += Math.cos(this.angle) * this.speed;
      this.y += Math.sin(this.angle) * this.speed;
      this.alpha -= this.decay;
    };

    Particle.prototype.draw = function() {
      ctx2.fillStyle = `rgba(255, 165, 0, ${this.alpha})`; // Orange color
      ctx2.beginPath();
      ctx2.arc(this.x, this.y, 3, 0, Math.PI * 2);
      ctx2.fill();
    };

    function createParticles(x, y) {
      for (let i = 0; i < 30; i++) {
        particles.push(new Particle(x, y));
      }
    }

    function animateFireworks() {
      ctx2.clearRect(0, 0, mainCanvas.width, mainCanvas.height);
      for (let i = particles.length - 1; i >= 0; i--) {
        particles[i].update();
        particles[i].draw();
        if (particles[i].alpha <= 0) {
          particles.splice(i, 1);
        }
      }
      requestAnimationFrame(animateFireworks);
    }
    animateFireworks(); // Start the fireworks animation loop

    document.addEventListener("keydown", function() {
      createParticles(Math.random() * mainCanvas.width, Math.random() * mainCanvas.height * 0.5);
    });

    document.addEventListener("mousedown", function(e) {
      createParticles(e.clientX, e.clientY);
    });

    // ==============================
    // Resize Handler
    // ==============================
    window.addEventListener('resize', function() {
      gardenCanvas.width = window.innerWidth;
      gardenCanvas.height = window.innerHeight;
      mainCanvas.width = window.innerWidth;
      mainCanvas.height = window.innerHeight;
      resizeBackgroundCanvas();
    });
  });
</script>
</body>
</html>
